"use strict";const r=require("electron");r.contextBridge.exposeInMainWorld("ipcRenderer",{on(e,n){const i=(o,...d)=>n(o,...d);return r.ipcRenderer.on(e,i),()=>{r.ipcRenderer.off(e,i)}},off(e,n){r.ipcRenderer.off(e,n)},send(...e){const[n,...i]=e;return r.ipcRenderer.send(n,...i)},invoke(...e){const[n,...i]=e;return r.ipcRenderer.invoke(n,...i)}});r.contextBridge.exposeInMainWorld("api",{openAudioFileDialog:()=>r.ipcRenderer.invoke("dialog:open-audio-file"),openExternal:e=>r.ipcRenderer.invoke("shell:open-external",e),openOverlayWindow:()=>r.ipcRenderer.send("window:open-overlay"),sendOverlayUpdate:e=>r.ipcRenderer.send("overlay:update",e),subscribeOverlayUpdates:e=>{const n=(i,o)=>e(o);return r.ipcRenderer.on("overlay:update",n),()=>r.ipcRenderer.off("overlay:update",n)},sendOverlayStyleUpdate:e=>r.ipcRenderer.send("overlay:style-update",e),subscribeOverlayStyleUpdates:e=>{const n=(i,o)=>e(o);return r.ipcRenderer.on("overlay:style-update",n),()=>r.ipcRenderer.off("overlay:style-update",n)},sendOverlayPreferenceUpdate:e=>r.ipcRenderer.send("overlay:preference-update",e),subscribeOverlayPreferenceUpdates:e=>{const n=(i,o)=>e(o);return r.ipcRenderer.on("overlay:preference-update",n),()=>r.ipcRenderer.off("overlay:preference-update",n)},sendOverlayScrollUpdate:e=>r.ipcRenderer.send("overlay:scroll-update",e),subscribeOverlayScrollUpdates:e=>{const n=(i,o)=>e(o);return r.ipcRenderer.on("overlay:scroll-update",n),()=>r.ipcRenderer.off("overlay:scroll-update",n)}});r.contextBridge.exposeInMainWorld("khelper",{dialogs:{pickAudioFile:()=>r.ipcRenderer.invoke("dialog:open-audio-file")},songLibrary:{addLocalSong:e=>r.ipcRenderer.invoke("library:add-local-song",e),loadAllSongs:()=>r.ipcRenderer.invoke("library:load-all"),getSongFilePath:e=>r.ipcRenderer.invoke("library:get-song-file-path",e),getOriginalSongFilePath:e=>r.ipcRenderer.invoke("library:get-original-song-file-path",e),getSeparatedSongPaths:e=>r.ipcRenderer.invoke("library:get-separated-song-paths",e),getBasePath:()=>r.ipcRenderer.invoke("library:get-base-path"),deleteSong:e=>r.ipcRenderer.invoke("library:delete-song",e),updateSong:(e,n)=>r.ipcRenderer.invoke("library:update-song",{id:e,updates:n})},jobs:{queueSeparationJob:(e,n)=>r.ipcRenderer.invoke("jobs:queue-separation",e,n),getAllJobs:()=>r.ipcRenderer.invoke("jobs:get-all"),subscribeJobUpdates:e=>{const n=(o,d)=>e(d),i=`jobs-${Date.now()}-${Math.random().toString(16).slice(2,6)}`;return r.ipcRenderer.send("jobs:subscribe",i),r.ipcRenderer.on("jobs:updated",n),()=>{r.ipcRenderer.send("jobs:unsubscribe",i),r.ipcRenderer.off("jobs:updated",n)}}},downloads:{validateUrl:e=>r.ipcRenderer.invoke("downloads:validate",e),queueDownload:(e,n,i,o,d,a)=>r.ipcRenderer.invoke("downloads:queue",e,n,i,o,d,a),getAllJobs:()=>r.ipcRenderer.invoke("downloads:get-all"),subscribeUpdates:e=>{const n=(o,d)=>e(d),i=`dl-${Date.now()}-${Math.random().toString(16).slice(2,6)}`;return r.ipcRenderer.send("downloads:subscribe",i),r.ipcRenderer.on("downloads:updated",n),()=>{r.ipcRenderer.send("downloads:unsubscribe",i),r.ipcRenderer.off("downloads:updated",n)}}},lyrics:{readRawLyrics:e=>r.ipcRenderer.invoke("lyrics:read-raw",e),readSyncedLyrics:e=>r.ipcRenderer.invoke("lyrics:read-synced",e),writeRawLyrics:e=>r.ipcRenderer.invoke("lyrics:write-raw",e),writeSyncedLyrics:e=>r.ipcRenderer.invoke("lyrics:write-synced",e),enrichLyrics:e=>r.ipcRenderer.invoke("lyrics:enrich",e)},queue:{save:e=>r.ipcRenderer.invoke("queue:save",e),load:()=>r.ipcRenderer.invoke("queue:load")},userData:{saveFavorites:e=>r.ipcRenderer.invoke("userData:save-favorites",e),loadFavorites:()=>r.ipcRenderer.invoke("userData:load-favorites"),saveHistory:e=>r.ipcRenderer.invoke("userData:save-history",e),loadHistory:()=>r.ipcRenderer.invoke("userData:load-history"),savePlaylists:e=>r.ipcRenderer.invoke("userData:save-playlists",e),loadPlaylists:()=>r.ipcRenderer.invoke("userData:load-playlists"),saveSettings:e=>r.ipcRenderer.invoke("userData:save-settings",e),loadSettings:()=>r.ipcRenderer.invoke("userData:load-settings")},updater:{check:()=>r.ipcRenderer.invoke("updater:check"),openReleasePage:()=>r.ipcRenderer.invoke("updater:open-release-page"),ignore:e=>r.ipcRenderer.invoke("updater:ignore",e),getStatus:()=>r.ipcRenderer.invoke("updater:get-status"),onStatus:e=>{const n=(i,o)=>e(o);return r.ipcRenderer.on("updater:status",n),()=>r.ipcRenderer.off("updater:status",n)}},windowOps:{minimize:()=>r.ipcRenderer.send("window:minimize"),maximize:()=>r.ipcRenderer.send("window:maximize"),close:()=>r.ipcRenderer.send("window:close"),isMaximized:()=>r.ipcRenderer.invoke("window:is-maximized"),onMaximized:e=>{const n=i=>e();return r.ipcRenderer.on("window:maximized",n),()=>r.ipcRenderer.removeListener("window:maximized",n)},onUnmaximized:e=>{const n=i=>e();return r.ipcRenderer.on("window:unmaximized",n),()=>r.ipcRenderer.removeListener("window:unmaximized",n)}}});
